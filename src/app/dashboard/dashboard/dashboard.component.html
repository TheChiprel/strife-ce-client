<div *ngIf="state == EChatAccountState.PREPARING_MATCH"
  style="position:absolute; left:0; right:0; top:56px; bottom:0; background:rgba(255,255,255,0.7); z-index:99999; display:flex; align-items: center; justify-content: center; ">
  <h1>Game Found! Joining in a moment...</h1>
</div>
<div class="row">
  <div class="col-md-2" style="padding:0px;">
    <div class="card" style="border-radius:0px; border-right:none; height:658px;">
      <div class="card-header">
          <h5 class="card-title" style="margin:6px 0px 5px 0px">Users in Chat</h5></div>
      <div class="card-body p-0" style="overflow-y: auto">
        <ul id="onlineUsers" class="list-group list-group-flush"></ul>
        <div style="height:10px"></div>
        <div *ngFor="let chatAccount of getChatAccounts()">
          <span style="padding: 5px 6px">
            <span style="width: 16px; height:16px; display: inline-block">
              <a href="https://www.patreon.com/strife_ce" [ngbTooltip]="chatAccount.iconTooltip" placement="right"
                target="_blank" *ngIf="chatAccount.icon">
                <img [src]="'assets/images/icons/' + chatAccount.icon +'.png'" style="width:16px; margin-top:-5px;" />
              </a>
            </span>
            {{chatAccount.name}} <span *ngIf="chatAccount.stateIcon"
              [class]="'float-right fa fa-' + chatAccount.stateIcon"
              style="position:absolute; right: 10px; margin-top:2px; color: #bbb"></span>
          </span>
        </div>
      </div>
      <div class="card-footer">
        <a *ngIf="!isChatAudioMuted" (click)="toggleMute()" style="font-size: 12px; color:#aaa"><span
            class="fa fa-volume-up"></span>&nbsp; sound notifications on</a>
        <a *ngIf="isChatAudioMuted" (click)="toggleMute()" style="font-size: 12px; color:#aaa"><span
            class="fa fa-volume-mute"></span>&nbsp; sound notifications off</a>
      </div>
    </div>
    <a target="_blank" href="https://www.patreon.com/bePatron?u=19872450"
      data-patreon-widget-type="become-patron-button">
      <ngb-progressbar type="primary" [value]="Math.ceil(patreonData.pledge_sum/70) " [striped]="true"
        [animated]="false" height="44px">
        <div style="position:absolute; font-weight:500; width:100%; font-size: 11px">Server cost covered By
          Patreon:<br />
          <span style="font-size:14px">{{Math.ceil(patreonData.pledge_sum / 100)}}$ of 70$</span></div>
      </ngb-progressbar>
    </a>
    <a target="_blank" href="https://www.patreon.com/bePatron?u=19872450"
      style="display:inline-block; overflow:hidden; width:106px;">
      <img src="assets/images/patreon_button.png" style="height:44px; margin-left: -110px;" />
    </a>
    <a target="_blank" href="https://www.paypal.me/strifece"
      style="display:inline-block; overflow:hidden; width:106px;">
      <img src="assets/images/paypal.png" style="height:44px; margin-left: 10px;" />
    </a>

  </div>
  <div class="col-md-6" style="padding:0px;">

    <div id="chatbox">
      <div class="card" style="border-radius:0px">
        <div style="box-sizing: border-box; height: 60px; background-color:#F7F7F7; border-bottom: 1px solid #eee; position:relative"
          *ngIf="this.chatAccount && !this.chatAccount.icon">
          <!-- strife -->
          <ng-adsense
            [display]="'inline-block'"
            [width]="468"
            [height]="60">
          </ng-adsense>
          <div style="position: absolute; top:0px; box-sizing:border-box; right:0px; width: 170px; height:60px; padding:12px; font-size:13px;">
            You want no ads? <br/>
            <a target="_blank" href="https://www.patreon.com/bePatron?u=19872450"
            data-patreon-widget-type="become-patron-button">Become a Patreon</a>
          </div>

          <!--<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8248851277942593"
            data-ad-slot="5562642351" data-ad-format="auto" data-full-width-responsive="true"></ins>-->
        </div>
        <div class="card-body" style="padding-top:10px">
          <dl id="messageList" style="overflow: auto"
            [style.height.px]="(this.chatAccount && !this.chatAccount.icon) ? 590 : (590 + 60)" #chatScrollContainer>
            <div class="msg" *ngFor="let msg of messages" [style.background-color]="msg.highlight ? '#dbe4f5': ''"
              [ngbTooltip]="'By ' + msg.account.name + ' at ' + msg.arrivedAt" placement="top">
              <b>
                <span style="width: 16px; height:16px; display: inline-block" *ngIf="msg.account.icon">
                  <a href="https://www.patreon.com/strife_ce"
                    [ngbTooltip]="msg.account.name + ' is a Patreon Supporter'" placement="left" target="_blank">
                    <img [src]="'assets/images/icons/' + msg.account.icon +'.png'"
                      style="width:16px; margin-top:-5px;" />
                  </a>
                </span>
                {{msg.account.name}}:</b>&nbsp;<span>{{msg.message}}</span>
            </div>
          </dl>
          <hr>
          <form id="sendMessage" (ngSubmit)="sendMessage(); ">
            <div class='input-group'>
              <input [disabled]="chatDisabled" #sendMsgInput type='text' name='message' class="form-control"
                placeholder="Type your message..." autofocus autocomplete="off">

              <div class='input-group-append'>
                <button [disabled]="chatDisabled" class='btn btn-primary'>Send</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-4" style="padding-right: 0px; padding-left: 0px">
    <div>
      <div class="card" style="border: none">
        <div class="card-header">
          <h5 class="card-title" style="margin:6px 0px">News</h5>
        </div>
        <div class="card-body" style="overflow-y:auto; height: 370px; font-size: 14px">
          Changes in v0.1.2:<br>
          <ul>
            <li>Added a set of <b>94 preselected crafted</b> items to the shop (thanks to <b>treehead</b> and
              <b>Neo1171</b> for preparing this!). If you want to request the addition of an crafted item, talk to
              Neo1171 on Discord!</li>
            <li>Added Paypal-Button for one-time donators</li>
            <li>Fixed "one player multiple times in game"-bug</li>
            <li>Fixed Testbutton bug</li>

          </ul>
          Changes in v0.1.1:<br>
          <ul>
            <li><b>Ingame Chat</b> is now working</li>
            <li>Ingame Chat to all via prefixed exclamation mark (example: !Hello everyone)</li>
            <li>Increased performance of Gameservers (running now in a <b>datacenter</b>)</li>
            <li>Added operation cost coverage bar</li>
            <li>Fixed Shop Bug for fresh installations</li>
            <li>Fixed overflowing Chat User-List</li>
            <!--<li>Fixed Testbutton bug</li>-->

          </ul>
          Changes in v0.1.0:<br>
          <ul>
            <li>Matches don't end anymore after a player left</li>
            <li>Reconnecting to a match is now possible</li>
            <li>Audio alerts on receiving a @-tagged message</li>
            <li>Remembering latest hero and pet selection</li>
          </ul>
          Changes in v0.0.4:<br>
          <ul>
            <li>Added player state indicators</li>
            <li>Fixed a bug which lead to one player being multiple times in a game</li>
            <li>Added the GRAND Patreon Supporter icon for supporters of 10+$ (Thank you Jertle)</li>
            <li>Chat highlighting if you mention someone via @name</li>
          </ul>
          Changes in v0.0.3:<br>
          <ul>
            <li>Added queue state indicators</li>
            <li>Enabled passive abilities of pets</li>
            <li>Fixed a bunch of matchmaking and hero bugs</li>
            <li>Added Patreon Supporter icons in chat</li>
          </ul>
          Changes in v0.0.2:<br>
          <ul>
            <li>Added all the previously missed heroes</li>
            <li>Added all pets</li>
            <li>Added selection for gamemodes</li>
            <li>Removed Blazer (<a target="_blank" href="https://www.strawpoll.me/17936571/r">community decission</a>)
            </li>
            <li>Added a icon for <a href="https://www.patreon.com/strife_ce" target="_blank">Patreon Supporters</a> in
              chat
            </li>
            <li>Fixed chat scroll issues</li>
            <li>Client redesign</li>
          </ul>
        </div>
      </div>
      <div style="position:absolute; bottom: 0px; height: 303px">
        <div class="card" style="border: none">
          <div class="card-header" style="border-top: 1px solid rgba(0, 0, 0, 0.125);">
            <h5 class="card-title" style="margin:4px 0px">Play</h5>
            <div style="position:absolute; right: 15px; margin-top: -44px">
              <circle-progress [percent]="queueStates[EGameMode.MODE_1ON1]/2*100" [radius]="20" [outerStrokeWidth]="3"
                [innerStrokeWidth]="3" [space]="-3" [outerStrokeColor]="'#a4a7ae'" [innerStrokeColor]="'#e7e8ea'"
                [animation]="true" [titleFontSize]="16" [subtitleColor]="'#aaaaaa'" [animationDuration]="300"
                [title]="queueStates[EGameMode.MODE_1ON1]" subtitle="1vs1&nbsp;&nbsp;" units="" [startFromZero]="false">
              </circle-progress>

              <circle-progress [percent]="queueStates[EGameMode.MODE_2ON2]/4*100" [radius]="20" [outerStrokeWidth]="3"
                [innerStrokeWidth]="3" [space]="-3" [outerStrokeColor]="'#a4a7ae'" [innerStrokeColor]="'#e7e8ea'"
                [animation]="true" [titleFontSize]="16" [subtitleColor]="'#aaaaaa'" [animationDuration]="300"
                [title]="queueStates[EGameMode.MODE_2ON2]" subtitle="2vs2&nbsp;&nbsp;" units="" [startFromZero]="false">
              </circle-progress>

              <circle-progress [percent]="queueStates[EGameMode.MODE_3ON3]/6*100" [radius]="20" [outerStrokeWidth]="3"
                [innerStrokeWidth]="3" [space]="-3" [outerStrokeColor]="'#a4a7ae'" [innerStrokeColor]="'#e7e8ea'"
                [animation]="true" [titleFontSize]="16" [subtitleColor]="'#aaaaaa'" [animationDuration]="300"
                [title]="queueStates[EGameMode.MODE_3ON3]" subtitle="3vs3&nbsp;&nbsp;" units="" [startFromZero]="false">
              </circle-progress>

              <circle-progress [percent]="queueStates[EGameMode.MODE_5ON5]/10*100" [radius]="20" [outerStrokeWidth]="3"
                [innerStrokeWidth]="3" [space]="-3" [outerStrokeColor]="'#a4a7ae'" [innerStrokeColor]="'#e7e8ea'"
                [animation]="true" [titleFontSize]="16" [subtitleColor]="'#aaaaaa'" [animationDuration]="300"
                [title]="queueStates[EGameMode.MODE_5ON5]" subtitle="5vs5&nbsp;&nbsp;" units="" [startFromZero]="false">
              </circle-progress>
            </div>
          </div>
          <!--<div class="card-header" style="background-color: #f3f3f3">
            <ul class="nav nav-tabs card-header-tabs">
              <li class="nav-item">
                <a class="nav-link active" href="#">Active</a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
              </li>
            </ul>
          </div>-->
          <div class="card-body">
            <div *ngIf="state == EChatAccountState.IDLE">
              Select one or multiple gamemodes: <br />

              <ng-toggle onColor="success" offColor="light" size="sm"
                [(ngModel)]="selectedGameModes[EGameMode.MODE_1ON1]">
                <ng-template ngToggleLabel forLabel="on"><span class="fa fa-check-circle"></span>&nbsp;&nbsp;1vs1
                </ng-template>
                <ng-template ngToggleLabel forLabel="off"><span class="fa fa-times-circle"></span>&nbsp;&nbsp;1vs1
                </ng-template>
              </ng-toggle>
              &nbsp;
              <ng-toggle onColor="success" offColor="light" size="sm"
                [(ngModel)]="selectedGameModes[EGameMode.MODE_2ON2]">
                <ng-template ngToggleLabel forLabel="on"><span class="fa fa-check-circle"></span>&nbsp;&nbsp;2vs2
                </ng-template>
                <ng-template ngToggleLabel forLabel="off"><span class="fa fa-times-circle"></span>&nbsp;&nbsp;2vs2
                </ng-template>
              </ng-toggle>
              &nbsp;
              <ng-toggle onColor="success" offColor="light" size="sm"
                [(ngModel)]="selectedGameModes[EGameMode.MODE_3ON3]">
                <ng-template ngToggleLabel forLabel="on"><span class="fa fa-check-circle"></span>&nbsp;&nbsp;3vs3
                </ng-template>
                <ng-template ngToggleLabel forLabel="off"><span class="fa fa-times-circle"></span>&nbsp;&nbsp;3vs3
                </ng-template>
              </ng-toggle>
              &nbsp;
              <ng-toggle onColor="success" offColor="light" size="sm"
                [(ngModel)]="selectedGameModes[EGameMode.MODE_5ON5]">
                <ng-template ngToggleLabel forLabel="on"><span class="fa fa-check-circle"></span>&nbsp;&nbsp;5vs5
                </ng-template>
                <ng-template ngToggleLabel forLabel="off"><span class="fa fa-times-circle"></span>&nbsp;&nbsp;5vs5
                </ng-template>
              </ng-toggle>

              <br /><br />

              <div class="row">
                <div class="col-md-6">
                  Select a Hero:
                  <select class="custom-select" [(ngModel)]="selectedHero">
                    <option *ngFor="let heroValue of getEnumValues(EHeroEnum)" [ngValue]="heroValue">
                      {{HeroEnumText.get(heroValue)}}
                    </option>
                  </select>
                </div>
                <div class="col-md-6">
                  Select a Pet:
                  <select class="custom-select" [(ngModel)]="selectedPet">
                    <option *ngFor="let petValue of getEnumValues(EPetEnum)" [ngValue]="petValue">
                      {{PetEnumText.get(petValue)}}
                    </option>
                  </select>
                </div>
                <div class="col-md-12">
                  &nbsp;
                  <button class="btn btn-primary btn-block" (click)="startGameSearch()">Play</button>
                </div>
              </div>

            </div>
            <div *ngIf="state == EChatAccountState.QUEUE || state == EChatAccountState.PREPARING_MATCH">
              <div class="row">
                <div class="col-6">
                  Gamemodes:
                </div>
                <div class="col-6">
                  <b>
                    {{selectedGameModes[EGameMode.MODE_1ON1]? '1vs1':''}}
                    {{selectedGameModes[EGameMode.MODE_2ON2]? '2vs2':''}}
                    {{selectedGameModes[EGameMode.MODE_3ON3]? '3vs3':''}}
                    {{selectedGameModes[EGameMode.MODE_5ON5]? '5vs5':''}}
                  </b>
                </div>
                <div class="col-6">
                  Hero:
                </div>
                <div class="col-6">
                  <b>{{HeroEnumText.get(selectedHero)}}</b>
                </div>
                <div class="col-6">
                  Pet:
                </div>
                <div class="col-6">
                  <b>{{PetEnumText.get(selectedPet)}}</b>
                </div>
              </div>
              <br /><br />
              <div style="text-align:left">Searching for players, please wait... {{searchingTime}} seconds</div>
              <br />
              <button class="btn btn-danger btn-block" (click)="cancelGameSearch()">Abort searching</button>
            </div>

            <div *ngIf="state == EChatAccountState.INGAME">
              <div class="row">
                <div class="col-6">
                  Gamemodes:
                </div>
                <div class="col-6">
                  <b>
                    {{selectedGameModes[EGameMode.MODE_1ON1]? '1vs1':''}}
                    {{selectedGameModes[EGameMode.MODE_2ON2]? '2vs2':''}}
                    {{selectedGameModes[EGameMode.MODE_3ON3]? '3vs3':''}}
                    {{selectedGameModes[EGameMode.MODE_5ON5]? '5vs5':''}}
                  </b>
                </div>
                <div class="col-6">
                  Hero:
                </div>
                <div class="col-6">
                  <b>{{HeroEnumText.get(selectedHero)}}</b>
                </div>
                <div class="col-6">
                  Pet:
                </div>
                <div class="col-6">
                  <b>{{PetEnumText.get(selectedPet)}}</b>
                </div>
              </div>
              <br /><br />
              <div style="text-align:left">You left a running game. Please reconnect!</div>
              <br />
              <button class="btn btn-primary" style="width:252px; margin-right:10px" (click)="joinMatch()">Rejoin the
                game</button>
              <button class="btn btn-danger" (click)="cancelMatch()">Abort game</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
